<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorpresa de San Valent√≠n üéÅüíú</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background: radial-gradient(circle at center, #300018 0%, #100020 100%);
            color: #f3e5f5;
            margin: 0;
            overflow-x: hidden;
            min-height: 100vh;
        }

        #pantalla-inicio {
            position: fixed; inset: 0;
            background: linear-gradient(45deg, #1a0033, #4b0026);
            z-index: 9999; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
        }

        .btn-comenzar {
            background: #e91e63; color: white; padding: 20px 45px;
            border-radius: 50px; font-size: 1.5rem; font-weight: bold;
            cursor: pointer; box-shadow: 0 0 30px rgba(233, 30, 99, 0.5);
            transition: 0.3s;
        }

        #btn-musica {
            position: fixed; top: 20px; right: 20px;
            z-index: 10001; background: #e91e63;
            width: 55px; height: 55px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; box-shadow: 0 0 15px rgba(233, 30, 99, 0.7);
            font-size: 1.5rem; border: 2px solid white;
            animation: pulse-music 2s infinite;
        }
        @keyframes pulse-music {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        #caja-seccion {
            position: fixed; inset: 0; z-index: 5000;
            background: radial-gradient(circle at center, #300018 0%, #100020 100%);
            display: none; flex-direction: column; justify-content: center; align-items: center;
        }

        .gift-container { position: relative; width: 180px; height: 180px; perspective: 1000px; cursor: pointer; }
        .gift-box { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform 1s; transform: rotateX(-15deg) rotateY(15deg); }
        .gift-side { position: absolute; width: 180px; height: 180px; background: #e91e63; border: 1px solid #c2185b; }
        .front { transform: rotateY(0deg) translateZ(90px); }
        .back { transform: rotateY(180deg) translateZ(90px); }
        .left { transform: rotateY(-90deg) translateZ(90px); }
        .right { transform: rotateY(90deg) translateZ(90px); }
        .top { transform: rotateX(90deg) translateZ(90px); background: #ff4081; z-index: 10; transition: 0.8s; }
        .bottom { transform: rotateX(-90deg) translateZ(90px); background: #880e4f; }
        .ribbon-v { position: absolute; width: 30px; height: 100%; background: #ffd700; left: 50%; transform : translateX(-50);}
        .ribbon-h { position: absolute; width: 100%; height: 30px; background: #ffd700; top:50%; transform : translateY(-50%);}
        .gift-container.open .top { transform: rotateX(110deg) translateZ(150px) translateY(-150px); opacity: 0; }

        .balloon { position: absolute; bottom: 50px; width: var(--sz); height: calc(var(--sz) * 1.2); border-radius: 50%; z-index: 6000; animation: balloonUp var(--dur) ease-in forwards; opacity: 0.9; }
        @keyframes balloonUp { 0% { transform: translateY(0) scale(0.5); opacity: 1; } 100% { transform: translateY(-120vh) translateX(var(--x-move)) scale(1.2); opacity: 0; } }

        #main-content { display: none; opacity: 0; transition: 1.5s; width: 100%; flex-direction: column; align-items: center; padding-bottom: 100px; }

        .flower-garden { display: flex; gap: 20px; margin-bottom: 20px; font-size: 3rem; }
        .flower { animation: sway 3s ease-in-out infinite; transform-origin: bottom center; }
        @keyframes sway {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }

        .timer-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 30px;
            text-align: center;
        }
        .timer-grid { display: flex; gap: 15px; justify-content: center; margin-top: 10px; }
        .timer-item { display: flex; flex-direction: column; }
        .timer-val { font-size: 1.5rem; font-weight: bold; color: #ff80ab; }
        .timer-label { font-size: 0.7rem; text-transform: uppercase; opacity: 0.7; }

        canvas {
            max-width: 100%;
            height: auto;
            filter: drop-shadow(0 0 20px rgba(233, 30, 99, 0.5));
            margin-bottom: 40px;
        }

        .frase-especial {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: #f3e5f5;
            text-align: center;
            padding: 20px;
            line-height: 1.2;
            text-shadow: 0 0 10px rgba(233, 30, 99, 0.8);
            margin-bottom: 20px;
        }

        .envelope-container { display: flex; align-items: flex-end; justify-content: center; gap: 30px; background: rgba(255, 255, 255, 0.05); padding: 40px 20px; border-radius: 30px; backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .envelope-wrapper { cursor: pointer; position: relative; }
        .envelope { position: relative; background: #7b1fa2; border-radius: 0 0 10px 10px; z-index: 10; }
        .envelope::before { content: ""; position: absolute; top: 0; z-index: 12; border-top: var(--flap-size) solid #e91e63; border-left: var(--side-size) solid transparent; border-right: var(--side-size) solid transparent; transform-origin: top; transition: 0.6s; }
        .envelope.open::before { transform: rotateX(180deg); }
        
        .letter { 
            position: absolute; bottom: 5px; left: 5%; width: 90%; 
            background: white; color: #2d004b; padding: 15px; 
            border-radius: 5px; transition: 0.8s; max-height: 0; 
            opacity: 0; overflow-y: auto; 
        }
        /* CORRECCI√ìN: Z-INDEX PARA QUE LA CARTA SE VEA SOBRE EL SOBRE */
        .envelope.open .letter { 
            transform: translateY(var(--letter-up)); 
            z-index: 20; max-height: 480px; opacity: 1; padding: 20px; 
        }
        
        .main-env { --flap-size: 100px; --side-size: 140px; --letter-up: -360px; width: 280px; height: 160px; }
        .mini-env { --flap-size: 35px; --side-size: 55px; --letter-up: -120px; width: 110px; height: 75px; }

        .fuente-elegante { font-family: 'Dancing Script', cursive; }
        .falling-item { position: fixed; top: -10vh; animation: fall linear forwards; z-index: 2000; pointer-events: none; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

    <div id="btn-musica" onclick="window.open('https://open.spotify.com/playlist/0iJV60p2hr1koM1vNnMTFt?si=Pc_ps3iYTPuMFDHTRClFSA&pt=2bfd2ef4f614d15211ffd6e6415289ac', '_blank')">üéµ</div>

    <div id="pantalla-inicio">
        <div class="text-8xl mb-6 animate-bounce">üéÅ</div>
        <h1 class="text-4xl text-white fuente-elegante mb-10 px-6">¬øPreparada para tu sorpresa?</h1>
        <button class="btn-comenzar" onclick="irACaja()">VER REGALO ‚ú®</button>
    </div>

    <div id="caja-seccion">
        <p class="fuente-elegante text-2xl text-pink-200 mb-10 animate-pulse">Toca la caja para abrirla...</p>
        <div class="gift-container" onclick="abrirCaja(this)">
            <div class="gift-box">
                <div class="gift-side front"><div class="ribbon-v"></div></div>
                <div class="gift-side back"><div class="ribbon-v"></div></div>
                <div class="gift-side left"><div class="ribbon-h"></div></div>
                <div class="gift-side right"><div class="ribbon-h"></div></div>
                <div class="gift-side top"><div class="ribbon-v"></div><div class="ribbon-h"></div></div>
                <div class="gift-side bottom"></div>
            </div>
            <div id="globos-container"></div>
        </div>
    </div>

    <div id="main-content">
        <h1 class="text-5xl md:text-6xl text-white fuente-elegante text-center mb-6 mt-10">¬°Feliz San Valent√≠n! üíñ</h1>
        
        <div class="flower-garden">
            <span class="flower">üåπ</span>
            <span class="flower" style="animation-delay: 0.5s">üå∑</span>
            <span class="flower" style="animation-delay: 1s">üå∏</span>
            <span class="flower" style="animation-delay: 1.5s">üåª</span>
        </div>

        <div class="timer-container">
            <p class="text-sm font-semibold text-pink-200 uppercase tracking-widest">Tiempo Juntos</p>
            <div id="timer" class="timer-grid">
                <div class="timer-item"><span id="days" class="timer-val">0</span><span class="timer-label">D√≠as</span></div>
                <div class="timer-item"><span id="hours" class="timer-val">0</span><span class="timer-label">Horas</span></div>
                <div class="timer-item"><span id="minutes" class="timer-val">0</span><span class="timer-label">Min</span></div>
                <div class="timer-item"><span id="seconds" class="timer-val">0</span><span class="timer-label">Seg</span></div>
            </div>
        </div>

        <div class="frase-especial">
            QUIERES SER MI SAN VALENT√çN?üíú
        </div>

        <canvas id="canvasCorazon"></canvas>

        <img src="https://i.postimg.cc/FHKbPGy6/1000056831-removebg-preview.png" alt="Coraz√≥n" class="w-64 md:w-80 mb-12 drop-shadow-2xl animate-pulse">

        <div class="envelope-container flex-col md:flex-row items-center md:items-end">
            <div class="envelope-wrapper" onclick="toggleMain()">
                <div class="envelope main-env" id="main-envelope">
                    <div class="letter">
                        <p id="main-texto" class="text-xs md:text-sm text-gray-800 text-left italic font-medium whitespace-pre-line"></p>
                    </div>
                </div>
                <p class="text-center text-pink-200 mt-4 text-xs tracking-widest uppercase">Leer carta üíå</p>
            </div>

            <div class="envelope-wrapper" onclick="toggleMini()">
                <div class="envelope mini-env" id="mini-envelope">
                    <div class="letter"><p id="mini-texto" class="text-center font-bold text-pink-900 text-xs italic"></p></div>
                </div>
                <p class="text-center text-pink-200 mt-2 text-[10px] tracking-widest uppercase">Detalle üíã</p>
            </div>
        </div>

        <p class="text-pink-400 mt-20 fuente-elegante text-2xl pb-10">Desde el 11 de Julio de 2025... ‚ù§Ô∏è</p>
    </div>

    <script>
        const fechaInicio = new Date("July 11, 2025 00:00:00").getTime();

        const canvas = document.getElementById('canvasCorazon');
        const ctx = canvas.getContext('2d');
        canvas.width = 600; canvas.height = 600;
        const hearts = [];
        const colors = ["#ff0a54", "#ff477e", "#ff7096", "#ff85a1", "#f72585", "#b5179e", "#fb6f92", "#ffb3c1"];

        function getHeartPoint(t) {
            const scale = 18;
            const x = 16 * Math.pow(Math.sin(t), 3);
            const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
            return { x: x * scale + canvas.width / 2, y: y * scale + canvas.height / 2 };
        }

        class HeartLeaf {
            constructor() {
                const t = Math.random() * Math.PI * 2;
                const target = getHeartPoint(t);
                this.x = canvas.width / 2; this.y = canvas.height / 2;
                const r = Math.sqrt(Math.random()); 
                this.targetX = (target.x - canvas.width / 2) * r + canvas.width / 2;
                this.targetY = (target.y - (canvas.height / 2)) * r + (canvas.height / 2);
                this.size = Math.random() * 12 + 10; 
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.progress = 0; this.speed = Math.random() * 0.007 + 0.003; 
                this.opacity = 0; this.rotation = Math.random() * Math.PI * 2;
            }
            draw() {
                ctx.save(); ctx.globalAlpha = this.opacity; ctx.translate(this.x, this.y); ctx.rotate(this.rotation);
                ctx.beginPath(); const s = this.size; ctx.moveTo(0, 0); ctx.bezierCurveTo(-s, -s, -s * 1.5, s / 3, 0, s);
                ctx.bezierCurveTo(s * 1.5, s / 3, s, -s, 0, 0); ctx.fillStyle = this.color; ctx.fill(); ctx.restore();
            }
            update() {
                if (this.progress < 1) {
                    this.progress += this.speed;
                    const ease = 1 - Math.pow(1 - this.progress, 3);
                    this.x = (1 - ease) * (canvas.width / 2) + ease * this.targetX;
                    this.y = (1 - ease) * (canvas.height / 2) + ease * this.targetY;
                    this.opacity = ease;
                }
            }
        }

        function animateHeart() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (hearts.length < 1800) { for(let i = 0; i < 10; i++) { hearts.push(new HeartLeaf()); } }
            hearts.forEach(h => { h.update(); h.draw(); });
            requestAnimationFrame(animateHeart);
        }

        function actualizarCronometro() {
            const ahora = new Date().getTime();
            const diferencia = ahora - fechaInicio;
            document.getElementById("days").innerText = Math.floor(diferencia / (1000 * 60 * 60 * 24));
            document.getElementById("hours").innerText = Math.floor((diferencia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            document.getElementById("minutes").innerText = Math.floor((diferencia % (1000 * 60 * 60)) / (1000 * 60));
            document.getElementById("seconds").innerText = Math.floor((diferencia % (1000 * 60)) / 1000);
        }

        setInterval(actualizarCronometro, 1000);
        actualizarCronometro(); // Ejecutar una vez al inicio

        function irACaja() {
            document.getElementById('pantalla-inicio').style.display = 'none';
            document.getElementById('caja-seccion').style.display = 'flex';
        }

        function abrirCaja(el) {
            if (el.classList.contains('open')) return;
            el.classList.add('open');
            const container = document.getElementById('globos-container');
            for(let i=0; i<60; i++) {
                const b = document.createElement('div'); b.className = 'balloon';
                b.style.setProperty('--sz', `${Math.random()*30+20}px`);
                b.style.backgroundColor = ['#ff4081','#e91e63','#7b1fa2','#ffd700','#ffffff'][Math.floor(Math.random()*5)];
                b.style.left = '70px'; b.style.setProperty('--x-move', (Math.random()*600 - 300) + 'px');
                b.style.setProperty('--dur', (Math.random()*2+2)+'s'); b.style.animationDelay = (Math.random()*0.8)+'s';
                container.appendChild(b);
            }
            setTimeout(() => {
                document.getElementById('caja-seccion').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('caja-seccion').style.display = 'none';
                    const main = document.getElementById('main-content');
                    main.style.display = 'flex';
                    setTimeout(() => { main.style.opacity = '1'; animateHeart(); }, 100);
                    setInterval(crearCorazonLluvia, 300);
                    document.body.style.overflow = "auto";
                }, 800);
            }, 3000);
        }

        const textoCarta = `Feliz 14 de febrero,mi amor m√≠o.

Hoy quise sentarme a escribirte sin prisas‚Ä¶ dejar que el coraz√≥n hablara solo, porque cuando se trata de ti las palabras ya no son simples letras, se vuelven sentimientos, recuerdos, sue√±os y hasta un poquito de miedo bonito. Este 14 de febrero no quer√≠a mandarte solo un ‚Äúfeliz d√≠a‚Äù, quer√≠a regalarte algo que se quede contigo, algo que puedas leer y sentir que estoy ah√≠, cerquita, aunque sea entre l√≠neas.

A veces me pongo a pensar en c√≥mo empez√≥ todo, en lo improbable que era coincidir t√∫ y yo entre tanta gente, tantas historias, tantas vidas cruz√°ndose todos los d√≠as. Y aun as√≠, aqu√≠ estamos‚Ä¶ t√∫ siendo parte de mi paz, de mis sonrisas, de mis pensamientos antes de dormir y muchas veces tambi√©n apenas despierto. Y es incre√≠ble, porque no lo plane√©, no lo busqu√©‚Ä¶ simplemente llegaste, y desde entonces algo en m√≠ se siente m√°s completo.

Me gusta tu forma de ver la vida, tu manera de sentir tan profundo, incluso esas inseguridades que a veces cargas y que yo quisiera poder quitarte con un abrazo. Me gusta tu risa, tu esencia, tu coraz√≥n tan bonito. Me gusta saber que existes, as√≠ de simple. Porque cuando alguien te importa de verdad, hasta su existencia se vuelve motivo de alegr√≠a.

Contigo aprend√≠ que querer a alguien no siempre es algo ruidoso o exagerado; a veces es algo tranquilo, constante, sincero‚Ä¶ como una luz que no deslumbra pero siempre est√° ah√≠. Eso siento contigo: algo real, algo que no necesito presumir para saber que vale much√≠simo.

Y s√≠, tambi√©n pienso en el futuro. No con miedo, pero s√≠ con esa nostalgia anticipada que da cuando algo es demasiado valioso. S√© que vienen cambios, universidades, responsabilidades, caminos que quiz√° no siempre ir√°n en paralelo. La vida tiene esa costumbre de movernos, de ponernos retos, de hacernos crecer aunque eso signifique separarnos un poco de lo que queremos.

No te voy a mentir, la idea de que alg√∫n d√≠a la rutina ya no nos deje hablar tanto, o que los kil√≥metros se atraviesen entre nosotros, me pone un poco melanc√≥lico. Porque cuando alguien se vuelve importante, uno quisiera congelar el tiempo en los momentos donde todo se siente perfecto. Pero tambi√©n entiendo que crecer implica aceptar esos cambios‚Ä¶ y aun as√≠ seguir queriendo bonito.

Quiero que sepas algo muy claro, pase lo que pase: lo que siento por ti no depende solo de la cercan√≠a, ni de los mensajes diarios, ni siquiera del t√≠tulo que tengamos alg√∫n d√≠a. Hay personas que marcan tu historia para siempre, que se quedan viviendo en tu memoria como un cap√≠tulo favorito que jam√°s se borra. Y t√∫, sinceramente, eres eso para m√≠.

Si la vida nos mantiene juntos, voy a ser feliz caminando contigo, apoy√°ndote, vi√©ndote cumplir sue√±os, estando orgulloso de la mujer que eres. Pero si alg√∫n d√≠a los caminos se separan un poco, si la universidad o los proyectos nos llevan por rutas distintas‚Ä¶ quiero que recuerdes que aqu√≠ siempre habr√° alguien que te quiso de verdad, sin prisas, sin m√°scaras, sin condiciones raras.

Porque quererte no es solo tenerte cerca; es desearte paz aunque no sea conmigo todo el tiempo, es alegrarme por tus logros, es querer que seas feliz incluso en escenarios donde yo solo sea un recuerdo bonito. Y no lo digo desde la tristeza total‚Ä¶ lo digo desde el cari√±o sincero que te tengo.

A veces el amor m√°s real no es el que promete ‚Äúpara siempre‚Äù a la ligera, sino el que dice: ‚Äúmientras coincidamos, voy a cuidarte, respetarte y quererte bonito; y si la vida cambia, igual voy a agradecer haberte conocido‚Äù. Ese es el tipo de amor que siento por ti.

Hoy, en este 14 de febrero, solo quiero que te quedes con esto: eres alguien muy especial en mi vida. Has dejado huellas que no se borran f√°cil. Me has regalado momentos que guardo como tesoros. Y aunque el tiempo avance, aunque las circunstancias cambien, siempre vas a tener un espacio en mi coraz√≥n donde vives tranquila, sin prisas, sin finales forzados.

Tal vez no sepamos exactamente qu√© pasar√° ma√±ana, pero hoy te quiero, hoy te valoro, hoy agradezco tu existencia en mi historia. Y honestamente, eso ya hace que todo valga la pena.

Feliz 14 de febrero, mi ni√±a. ‚ù§Ô∏è Siempre voy a guardar lo nuestro como algo bonito, pase lo que pase.
Quieres ser mi San Valent√≠n? ‚ù§Ô∏è`;

        const frasesMini = ["Eres mi mundo. üåé", "Te amo hasta el infinito. ‚ù§Ô∏è", "Gracias por existir. ‚ú®", "Te amo estrellita. ‚≠ê"];

        // CORRECCI√ìN: FUNCI√ìN DE ESCRITURA MEJORADA
        let escribiendo = false;
        function escribir(id, txt) {
            let i = 0; 
            const c = document.getElementById(id); 
            c.innerHTML = "";
            const intervalo = setInterval(() => {
                if(i < txt.length) {
                    c.innerHTML += txt.charAt(i++);
                } else {
                    clearInterval(intervalo);
                    escribiendo = false;
                }
            }, 30);
        }

        function toggleMain() {
            const env = document.getElementById('main-envelope');
            if(!env.classList.contains('open')) { 
                env.classList.add('open'); 
                if(!escribiendo) {
                    escribiendo = true;
                    setTimeout(() => escribir('main-texto', textoCarta), 600);
                }
            } else {
                env.classList.remove('open');
                document.getElementById('main-texto').innerHTML = "";
            }
        }

        function toggleMini() {
            const env = document.getElementById('mini-envelope');
            if(!env.classList.contains('open')) { 
                env.classList.add('open'); 
                escribir('mini-texto', frasesMini[Math.floor(Math.random()*frasesMini.length)]); 
            } else {
                env.classList.remove('open');
            }
        }

        function crearCorazonLluvia() {
            const el = document.createElement('div'); el.className = 'falling-item';
            el.innerHTML = ['‚ù§Ô∏è', 'üíñ', 'üíú', 'üíê'][Math.floor(Math.random()*4)];
            el.style.left = Math.random()*100 + "vw"; el.style.fontSize = (Math.random()*20+15)+"px";
            el.style.animationDuration = (Math.random()*3+2)+"s"; document.body.appendChild(el);
            setTimeout(() => el.remove(), 5000);
        }
    </script>
</body>
</html>